# Webのセキュリティと認証
## 01. Webシステムのセキュリティ

**情報セキュリティ**
「機密性」「完全性」「可用性」を維持すること。
この３つを情報セキュリティの３要素と呼ぶ。

|要素|内容|
|---|---|
|機密性|アクセスを認められた者だけがその情報にアクセスできる状態を確保すること|
|完全性|情報が破壊・改竄・消去されていない状態を確保すること|
|可用性|必要な時はいつでも情報にアクセスできる状態を確保すること|

**リスク**
情報セキュリティが維持できず、何らかの損失が発生する可能性

**脅威**
リスクを現実化させる要因

**脆弱性**
脅威に対する弱み

実際に不正アクセスを受け、損失が現実化することを「__リスクが顕在化する__」という。

セキュリティの維持には、脅威や脆弱性を洗い出し、リスクの顕在化を防ぐための対策を行う必要がある。一般的にはリスクによる損失の度合いを算出し、それに応じて優先順位を決めた上で対策を行う。

## 02. パスワードクラッキング、Dos攻撃

**パスワードクラッキング**
個人情報を狙い、IDとパスワードによる認証を行う会員制Webサイトからユーザーのパスワードを抜き出そうとする攻撃

**辞書攻撃**
よるパスワードに使われる単語をまとめたファイルを用意しておいて、それを使ってログインを次々試すことでパスワードを当てるという攻撃。

**ブルートフォース攻撃**
パスワードに使われる文字の全組み合わせをしらみ潰しに試す方法

**DoS攻撃(Denial of Service)**
短時間にサーバーが処理仕切れないような大量のアクセスを行うことで、サービス停止に陥らせる攻撃

**SYN Flood攻撃**
TCPのやり取りにおけるSYNパケットだけを大量に送り付け、サーバーを接続待ち状態にさせることで別のユーザーからの新たな接続を確率できなくする攻撃。

**F5攻撃**
繰り返しアクセスし続けることによって、リクエストへの反応ができないレベルまでWebサーバーの負荷を高める攻撃。
F5キーで再読み込みリクエストが送られることからF5攻撃と呼ばれる。

**対策**
不自然なアクセスの増加を検知し、送信元のIPアドレスからのアクセスをいち早く遮断するなど。

## 03. Webシステムの特徴を利用した攻撃

**セクションハイジャック**
第三者がCookieの中身やセッションIDを取得できれば、ユーザーのシステムを利用できるようになり、容易に個人情報を取得できる。

**ディレクトリトラバーサル**
公開されていないファイルをURLの指定により取得することで、
Webサーバー自体のログインパスワード を取得し、Webサーバーへ不正にログインするなどの攻撃につなげる

## 04. Webアプリケーションの脆弱性を狙う攻撃

**クロスサイトスクリプティング(Cross Site Scripting : XSS)**
ユーザーの入力内容を表示するタイプのWebサイトにスクリプトを書きこむことによって情報を抜き出したりすること。

**クロスサイトリクエストフォージェリ(Cross Site Requset Forgeris : CSRF)**
ログインが必要なサイトに対して操作を行うリンクにユーザーがアクセスすることで被害を受ける攻撃。

**SQLインジェクション**
送信する情報にDBが解釈できる別の内容を混ぜ込むことで、DBに意図しない動作を行わせる攻撃

## 05. webシステムの脆弱性

**セキュリティホール**
ソフトウェア製品の欠陥により、権限がないと本来できないはずの操作が権限を持たないユーザーにも実行できてしまsったり、見るべきではない情報が第三者に見えてしまうような不具合

**ゼロデイ攻撃**
発見されたセキュリティホールに対する修正プログラムが開発される前に、そのセキュリティホールを利用した攻撃を仕掛けること。

## 06. ファイアーウォール

インターネットと内部のネットワークの間に設置し、送受信されるデータを監視して通信の許可・拒否を行うもの

**パケットフィルタ型**
送信されるデータ（パケット）のIPアドレスとポート番号をチェックし、通信の許可/拒否の判断を行う。
インターネットから内部に向けた通信だけでなく、内部からインターネットへの通信も制限できる。

## 07. IDS、IPS

ファイアーウォールで防ぎきれない攻撃を防ぐ手段の１つにIDS（Instrusion Detection System）と IPS（Intrusion Presvention System）がある。
通信を監視するネットワーク型と、サーバー上のユーザーの動きを監視するホスト型の２種類がある。

IDS : 異常があったことをシステム管理者にメールなどで通知するだけ
IPS : 通知だけでなく、即座に該当する通信の遮断を行う

IDS, IPSの不正アクセス県地方には、「__シグネチャ型__」と「__アノマリー型__」の２つの方法がある。

**シグネチャ型（不正検知型）**
基地の攻撃手法における通信パターンが登録されたデータベースのこと。
パターンと一致する通信を不正アクセスと判断する。

**アノマリー型**
普段の通信とは大きく異なる通信や、通常は発生しないような通信を不正アクセスと判断する検知方法

## 08. WAF

**WAF(Web Application FireWall)**
やり取りされるパケットの中身を見て悪意のあるデータが含まれていないかチェックする

**ブラックリスト型**
特定のパターンのデータを持つ通信を遮断する。基本的にはWAFの開発元が提供するものを利用することとなるが、新たな攻撃手法が発見された場合はブラックリストにパターンが追加されるまでは対応ができない。

**ホワイトリスト型**
正常なデータのパターンを登録しておき、それに適合する通信のみを通す。
専門的な知識が必要になり、コストがかかる。

## 09. 暗号化

**暗号化**
元のデータ（平文）を暗号化の手段（暗号化アルゴリズム）で第三者が読み取れないデータ（暗号文）にすること。

**復号**
暗号文を平文に戻すこと

**ハッシュ化**
ハッシュ関数と呼ばれる計算式によって任意の長さの文字列を固定長の文字列（ハッシュ値）に変換すること。

## 10. 公開鍵証明書

**公開鍵証明書**
SSL通信の公開鍵の証明に使われることが多かったため、一般にSSL証明書とも呼ばれる。
HTTPS通信に使うための公開鍵の持ち主が誰なのかを証明する
公開鍵の持ち主が実在することを証明する

**自己証明書**
公開鍵証明書の発行には時間がかかるため、身内で試験的に公開鍵証明書を利用する場合は、自らを認証局とした公開鍵証明書を作成することができる

## 11. 認証

**認証**
予め与えられたIDを使ってログインを行い、本人確認を行うこと

**認証API**
認証処理を提供する側は、処理の仕組みをAPIとして提供する。

**OpenID**
認証APIの問題を解決するため、認証処理を標準化したプロトコル

## 12. 認可

**認可**
認証によって確認した結果により、ユーザーごとの権限に従って利用できるサービスの許可を行うこと

**OAuth**
サイトをまたいだ認可を実現するために標準化されたプロトコル
機能としては認可のみであり、認証は行わない。そのため、基本的に認証を行う他のプロトコルと併用して使われる。

**OpenID Connect**
OAuth２.0をベースに認証機能が追加されたプロトコル

## 13. CAPTCHA

**CAPTCHA(Completely Automated Public Turing Test To Tell Computers and Humans Apart)**
プログラムを用いたWebサービスの悪用を防ぐために考案されたもの
プログラムによって悪用される可能性のある操作の直前に「人間は容易にじっしできるがプログラムでは困難な処理」をさせることで、一連の操作が人間の手によってさっじされたことを確認する。

## column セキュリティ対策は大変